language: java

jdk:
  - oraclejdk8

before_install:
  - sudo apt-get update -qq
  - sudo apt-get install -y activemq
  - sudo ln -s /etc/activemq/instances-available/main /etc/activemq/instances-enabled/main
  - sudo sed -e 's/<broker /<broker schedulerSupport="true" /' -i /etc/activemq/instances-enabled/main/activemq.xml
  - sudo service activemq restart

before_script:
  - echo "USE mysql;\nUPDATE user SET password=PASSWORD('password') WHERE user='root';\nFLUSH PRIVILEGES;\n" | mysql -u root

script:
  - mvn clean install -PIT

cache:
  directories:
    - $HOME/.m2